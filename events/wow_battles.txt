namespace = wow_battles

# Conquest of [From.GetName]
country_event = {
    id = wow_battles.1
	title = wow_battles.1.title
	desc = wow_battles.1.desc
	picture = ANGRY_MOB_eventPicture # Placeholder
    
    is_triggered_only = yes

    immediate = {
        add_war_exhaustion = -2
    }
    
    # Raise the dead
    option = {
		name = wow_battles.1.option.a

        trigger = {
            government = scourge_gov
        }
        
        FROM = {
            add_permanent_province_modifier = {
                name = battles_raise_the_dead_unrest
                duration = 720
            }
            set_local_autonomy = 75

            raise_the_dead_manpower = yes
        }
        
        ai_chance = {
            factor = 33
        }
	}
    
    # Slash and Burn
    option = {
		name = wow_battles.1.option.b
        
        FROM = {
            add_permanent_province_modifier = {
                name = battles_slash_and_burn_unrest
                duration = 720
            }
            change_culture = ROOT
            change_religion = ROOT
            set_local_autonomy = 75
        }
        
        ai_chance = {
            factor = 33
            
            modifier = {
                factor = 0
                NOT = { 
                    adm = 250
                }
            }
        }
	}
    
    # Take direct control
    option = {
		name = wow_battles.1.option.c

        FROM = {
            add_permanent_province_modifier = {
                name = battles_direct_control_unrest
                duration = 720
            }
            cede_province = ROOT
            add_core = ROOT
            set_local_autonomy = 100
        }
        
        ai_chance = {
            factor = 33
        }
	}
    
    # Leave alone
    option = {
		name = wow_battles.1.option.d

	}
}

# Automatic event
country_event = {
    id = wow_battles.3
	title = wow_battles.1.title
	desc = wow_battles.1.desc
	picture = ANGRY_MOB_eventPicture # Placeholder
    
    is_triggered_only = yes
    hidden = yes
    
    immediate = {
        add_war_exhaustion = -2
    }
    
    # Raise the dead
    option = {
		name = wow_battles.1.option.a

        trigger = {
            has_country_modifier = battles_raise_the_dead
        }
        
        FROM = {
            add_permanent_province_modifier = {
                name = battles_raise_the_dead_unrest
                duration = 720
            }
            set_local_autonomy = 75

            raise_the_dead_manpower = yes
        }
        
        ai_chance = {
            factor = 33
        }
	}
    
    # Slash and Burn
    option = {
		name = wow_battles.1.option.b
        
        trigger = {
            has_country_modifier = battles_slash_and_burn
        }
        
        FROM = {
            add_permanent_province_modifier = {
                name = battles_slash_and_burn_unrest
                duration = 720
            }
            change_culture = ROOT
            change_religion = ROOT
            set_local_autonomy = 75
        }
        
        ai_chance = {
            factor = 33
            
            modifier = {
                factor = 0
                NOT = { 
                    adm = 250
                }
            }
        }
	}
    
    # Take direct control
    option = {
		name = wow_battles.1.option.c

        trigger = {
            has_country_modifier = battles_direct_control
        }

        FROM = {
            add_permanent_province_modifier = {
                name = battles_direct_control_unrest
                duration = 720
            }
            cede_province = ROOT
            add_core = ROOT
            set_local_autonomy = 100
        }
        
        ai_chance = {
            factor = 33
        }
	}
    
    # Leave alone
    option = {
		name = wow_battles.1.option.d

        trigger = {
            has_country_modifier = battles_leave_alone
        }
	}
}

# Conquest of [From.GetName], the Capital
country_event = {
    id = wow_battles.4
	title = wow_battles.4.title
	desc = wow_battles.4.desc
	picture = ANGRY_MOB_eventPicture # Placeholder
    
    is_triggered_only = yes

    immediate = {
        add_war_exhaustion = -5
    }
    
    option = {
		name = wow_battles.4.option.a

        add_country_modifier = {
            name = battles_capital_control
            duratio = 365
        }
	}
}

province_event = {
    id = wow_battles.2
	title = wow_battles.2.title
	desc = wow_battles.2.desc
	picture = ANGRY_MOB_eventPicture # Placeholder
    
    is_triggered_only = yes
    
    hidden = yes
    
    trigger = {
        FROM = {
            OR = {
                government = warband_gov
                government = scourge_gov
            }
        }
    }
    
    option = {
		name = wow_battles.1.option.a

        if = {
            limit = { 
                is_capital = no
                is_city = yes
                FROM = {
                    AND = {
                        NOT = { has_country_modifier = battles_raise_the_dead }
                        NOT = { has_country_modifier = battles_slash_and_burn }
                        NOT = { has_country_modifier = battles_direct_control }
                        NOT = { has_country_modifier = battles_leave_alone }
                    }
                }
            }
            controller = { country_event = { id = wow_battles.1 } }  
        }
        
        if = {
            limit = { 
                is_capital = no
                is_city = yes
                FROM = {
                    OR = {
                        has_country_modifier = battles_raise_the_dead
                        has_country_modifier = battles_slash_and_burn
                        has_country_modifier = battles_direct_control
                        has_country_modifier = battles_leave_alone
                    }
                }
            }
            controller = { country_event = { id = wow_battles.3 } }  
        }
        
        if = {
            limit = { 
                is_capital = yes
                is_city = yes
            }
            controller = { country_event = { id = wow_battles.4 } }  
        }
	}
}

# Automatic choices
country_event = {
    id = wow_battles.100
	title = wow_battles.100.title
	desc = wow_battles.100.desc
	picture = ANGRY_MOB_eventPicture # Placeholder
    
    is_triggered_only = yes

    immediate = {
        remove_country_modifier = battles_raise_the_dead
        remove_country_modifier = battles_slash_and_burn
        remove_country_modifier = battles_direct_control
        remove_country_modifier = battles_leave_alone
    }
    
    # Raise the dead automatically
    option = {
		name = wow_battles.100.option.a

        trigger = {
            government = scourge_gov
        }
        
        add_country_modifier = {
            name = battles_raise_the_dead
            duration = -1
        }
	}
    
    # Slash and Burn automatically
    option = {
		name = wow_battles.100.option.b

        add_country_modifier = {
            name = battles_slash_and_burn
            duration = -1
        }
	}
    
    # Take direct control automatically
    option = {
		name = wow_battles.100.option.c

        add_country_modifier = {
            name = battles_direct_control
            duration = -1
        }
	}
    
    # Leave alone automatically
    option = {
		name = wow_battles.100.option.d

        add_country_modifier = {
            name = battles_leave_alone
            duration = -1
        }
	}
    
    # Manual control
    option = {
		name = wow_battles.100.option.e

        
	}
}
