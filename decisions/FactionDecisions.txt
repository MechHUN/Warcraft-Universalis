# Originally By Blanchard33
# These decisions relate to joining and leaving the Alliance, Horde, or becoming a Neutral Organization.
# Planned to be updated eventually with more limits, negative opinion modifiers for leaving factions and whatever comes to mind.
# Opinion modifiers will now display to show if a country is Horde, Alliance or a Neutral Organization

country_decisions = {
  #################
  # JOIN FACTIONS #
  #################

  join_the_alliance = {
    major = yes
    potential = {
      NOT = { has_country_modifier = horde_member }
      NOT = { has_country_modifier = alliance_member }
      NOT = { has_country_modifier = neutral_member }
      NOT = { has_country_modifier = alliance_enemy }
      is_good = yes
    }
    allow = {
      NOT = { has_country_modifier = horde_member }
      NOT = { has_country_modifier = alliance_member }
      NOT = { has_country_modifier = neutral_member }
      NOT = { has_country_modifier = alliance_enemy }
      any_country = {
        has_opinion = { who = ROOT value = 150 }
        has_country_modifier = alliance_member
      }
      is_good = yes
      is_subject = no
    }
    effect = {
      add_country_modifier = {
        name = alliance_member
        duration = -1
      }
      country_event = { id = faction_changes.1 }
    }
    ai_will_do = {
      factor = 1
    }
  }

  join_the_horde = {
    major = yes
    potential = {
      NOT = { has_country_modifier = horde_member }
      NOT = { has_country_modifier = alliance_member }
      NOT = { has_country_modifier = neutral_member }
      NOT = { has_country_modifier = horde_enemy }
      is_good = yes
    }
    allow = {
      NOT = { has_country_modifier = horde_member }
      NOT = { has_country_modifier = alliance_member }
      NOT = { has_country_modifier = neutral_member }
      NOT = { has_country_modifier = horde_enemy }
      any_country = {
        has_opinion = { who = ROOT value = 150 }
        has_country_modifier = horde_member
      }
      is_good = yes
      is_subject = no
    }
    effect = {
      add_country_modifier = {
        name = horde_member
        duration = -1
      }
      country_event = { id = faction_changes.2 }
    }
    ai_will_do = {
      factor = 1
    }
  }

  join_neutral = {
    major = yes
      potential = {
        NOT = { has_country_modifier = horde_member }
        NOT = { has_country_modifier = alliance_member }
        NOT = { has_country_modifier = neutral_member }
        NOT = { has_country_modifier = horde_enemy }
        NOT = { has_country_modifier = alliance_enemy }
        is_good = yes
      }
    allow = {
      OR = {
        any_country = {
          has_opinion = { who = ROOT value = 150 }
          has_country_modifier = neutral_member
        }
        AND = {
          any_country = {
            has_opinion = { who = ROOT value = 100 }
            has_country_modifier = alliance_member
          }
          any_country = {
            has_opinion = { who = ROOT value = 100 }
            has_country_modifier = horde_member
          }
        }
      }
      is_good = yes
      is_subject = no
    }
    effect = {
      add_country_modifier = {
        name = neutral_member
        duration = -1
      }
      country_event = { id = faction_changes.3 }
    }
    ai_will_do = {
      factor = 1
    }
  }

  ##################
  # LEAVE FACTIONS #
  ##################
  leave_the_alliance = {
    potential = {
      has_country_modifier = alliance_member
    }
    allow = {
      has_country_modifier = alliance_member
    }
    effect = {
      remove_country_modifier = alliance_member
      country_event = { id = faction_changes.4 }
    }
    ai_will_do = {
      factor = 0
    }
  }


  leave_the_horde = {
    potential = {
      has_country_modifier = horde_member
    }
    allow = {
      has_country_modifier = horde_member
    }
    effect = {
      remove_country_modifier = horde_member
      country_event = { id = faction_changes.5 }
    }
    ai_will_do = {
      factor = 0
    }
  }

  leave_neutral = {
    potential = {
      has_country_modifier = neutral_member
    }
    allow = {
      has_country_modifier = neutral_member
    }
    effect = {
      remove_country_modifier = neutral_member
      country_event = { id = faction_changes.6 }
    }
    ai_will_do = {
      factor = 0
    }
  }

###############################
# FACTION INFO FAKE DECISIONS #
###############################
# Not meant to be fired, just used for displaying Alliance, Horde and Neutral membership in the tooltip, for easy reference.
    neutral_info = {
        potential = {
            ai = no
        }
        allow = {
            always = no
        }
        effect = {
            every_known_country = {
                limit = {
                    has_country_modifier = neutral_member
                }
                add_prestige = 1
            }
        }
        ai_will_do = {
            factor = 0
        }
    }
    
    horde_info = {
        potential = {
            ai = no
        }
        allow = {
            always = no
        }
        effect = {
            every_known_country = {
                limit = {
                    has_country_modifier = horde_member
                }
                add_prestige = 1
            }
        }
        ai_will_do = {
            factor = 0
        }
    }

    alliance_info = {
        potential = {
            ai = no
        }
        allow = {
            always = no
        }
        effect = {
            every_known_country = {
                limit = {
                    has_country_modifier = alliance_member
                }
                add_prestige = 1
            }
        }
        ai_will_do = {
            factor = 0
        }
    }
}
